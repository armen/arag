Class.refactor=function(b,a){$each(a,function(e,d){var c=b.prototype[d];if(c&&(c=c._origin)&&typeof e=="function"){b.implement(d,function(){var f=this.previous;this.previous=c;var g=e.apply(this,arguments);this.previous=f;return g})}else{b.implement(d,e)}});return b};Class.Mutators.Binds=function(a){return a};Class.Mutators.initialize=function(a){return function(){$splat(this.Binds).each(function(b){var c=this[b];if(c){this[b]=c.bind(this)}},this);return a.apply(this,arguments)}};Class.Occlude=new Class({occlude:function(c,b){b=document.id(b||this.element);var a=b.retrieve(c||this.property);if(a&&!$defined(this.occluded)){this.occluded=a}else{this.occluded=false;b.store(c||this.property,this)}return this.occluded}});(function(){var b={wait:function(c){return this.chain(function(){this.callChain.delay($pick(c,500),this)}.bind(this))}};Chain.implement(b);if(window.Fx){Fx.implement(b);["Css","Tween","Elements"].each(function(c){if(Fx[c]){Fx[c].implement(b)}})}try{Element.implement({chains:function(c){$splat($pick(c,["tween","morph","reveal"])).each(function(d){d=this.get(d);if(!d){return}d.setOptions({link:"chain"})},this);return this},pauseFx:function(d,c){this.chains(c).get($pick(c,"tween")).wait(d);return this}})}catch(a){}})();
